<UserControl x:Class="SchoolManagementSystem.UI.UI.Views.Admin.ManageUserAccessPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:helpers="clr-namespace:SchoolManagementSystem.UI.UI.Helpers">

    <Grid Margin="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ================= LEFT : USERS ================= -->
        <Border Background="White"
                Padding="12"
                BorderBrush="#E5E7EB"
                BorderThickness="1"
                CornerRadius="8">

            <StackPanel>

                <!-- SEARCH -->
                <TextBox Height="40"
                         FontSize="10"
                         Padding="12,8"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         materialDesign:HintAssist.Hint="Search user"/>

                <!-- USERS -->
                <ListView Margin="0,12,0,0"
                          ItemsSource="{Binding Users}"
                          SelectedItem="{Binding SelectedUser}"
                          BorderThickness="0">

                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal"
                                        Margin="0,6"
                                        VerticalAlignment="Center">

                                <!-- AVATAR -->
                                <Border Width="30"
                                        Height="30"
                                        CornerRadius="15"
                                        Background="#E0E7FF">
                                    <TextBlock Text="{Binding Username,
                                        Converter={StaticResource FirstLetterConverter}}"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontWeight="SemiBold"
                                               FontSize="14"
                                               Foreground="#1E3A8A"/>
                                </Border>

                                <!-- INFO -->
                                <StackPanel Margin="12,0">
                                    <TextBlock Text="{Binding Username}"
                                               FontSize="10"
                                               FontWeight="SemiBold"/>
                                    <TextBlock Text="{Binding Email}"
                                               FontSize="11"
                                               Foreground="#6B7280"/>
                                </StackPanel>

                            </StackPanel>
                        </DataTemplate>
                    </ListView.ItemTemplate>

                </ListView>

            </StackPanel>
        </Border>

        <!-- ================= RIGHT : ACCESS ================= -->
        <Border Grid.Column="1"
                Margin="12,0,0,0"
                Background="White"
                Padding="16"
                BorderBrush="#E5E7EB"
                BorderThickness="1"
                CornerRadius="8">

            <StackPanel>

                <!-- TITLE -->
                <TextBlock Text="Access &amp; Permissions"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Margin="0,0,0,16"/>

                <!-- ROLE -->
                <ComboBox Height="40"
                          FontSize="10"
                          Padding="12,8"
                          Style="{StaticResource MaterialDesignOutlinedComboBox}"
                          ItemsSource="{Binding Roles}"
                          SelectedItem="{Binding SelectedUser.Role}"
                          materialDesign:HintAssist.Hint="Role"/>

                <!-- PERMISSIONS -->
                <TextBlock Text="Permissions"
                           FontSize="13"
                           FontWeight="SemiBold"
                           Margin="0,16,0,8"/>

                <StackPanel>
                    <CheckBox Content="Manage Users" FontSize="10"/>
                    <CheckBox Content="View Reports" FontSize="10"/>
                    <CheckBox Content="Finance Access" FontSize="10"/>
                </StackPanel>

                <!-- PORTAL ACCESS -->
                <TextBlock Text="Portal Access"
                           FontSize="13"
                           FontWeight="SemiBold"
                           Margin="0,16,0,8"/>

                <ToggleButton Style="{StaticResource MaterialDesignSwitchToggleButton}"
                              IsChecked="{Binding SelectedUser.IsActive}">
                    Enabled
                </ToggleButton>

                <!-- RESET PASSWORD -->
                <TextBlock Text="Security"
                           FontSize="13"
                           FontWeight="SemiBold"
                           Margin="0,16,0,8"/>

                <Button Height="40"
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Background="#DC2626"
                        Foreground="White"
                        Command="{Binding ResetPasswordCommand}">
                    Reset Password
                </Button>

                <!-- SAVE -->
                <Button Height="40"
                        Margin="0,24,0,0"
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Background="#2563EB"
                        Foreground="White"
                        Command="{Binding SaveAccessCommand}">
                    Save Changes
                </Button>

            </StackPanel>
        </Border>

    </Grid>
</UserControl>
